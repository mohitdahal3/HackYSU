<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="src/style.css">
    <title>Life Cycle of a Star</title>
    <style>

        #audio-control-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
            z-index: 10;
        }

        #main-text.playing {
          color: gold;

        }
    </style>
  </head>

  <body>
    <div id="smooth-wrapper">
      <div id="smooth-content">

        <div id="initial-scenes-wrapper">
    
          <section id="scene-1">
          <div id="audio-control-overlay"></div>
          <h1 id="main-text" role="button" class="text-white">The Life Cycle of a Star</h1>
          <div id="scroll-indicator" >Scroll Down ⬇️</div>
          </section>
      
          <section id="scene-2">
            <canvas id="nebula-canvas"></canvas>
          </section>
    
        </div>
    
        <section id="scene-3">
          <div id="scene3-texts">
            <h1 class="text1 text-white">A Star begins at Nebula,</h1>
            <h1 class="text2 text-white">a vast cloud of gas and dust in space</h1>
          </div>
          <!-- <h1 class="text-white">A Star begins at Nebula</h1>
          <h1 class="text-white">A Star begins at Nebula</h1> -->
          <canvas id="scene3-canvas"></canvas>
        </section>
    
      
        <!-- <div id="scroll-space"></div> -->

      </div>
    </div>

    <!-- GSAP Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- GSAP Plugins (Full Bundle) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://assets.codepen.io/16327/ScrollSmoother.min.js"></script>
    <script src="https://assets.codepen.io/16327/SplitText.min.js"></script>


    <script type="module" src="src/script.js"></script>

    <script>
        const audio = new Audio('src/Super_Nova.mp3');
        audio.preload = 'auto';
        const mainText = document.getElementById('main-text');
        const overlay = document.getElementById('audio-control-overlay');

        audio.play()
            .then(() => {

              mainText.classList.add('playing');
              addClickListener();
            })
            .catch(error => {

              console.error("Autoplay failed:", error);
              addClickListener();
            });
          
        function addClickListener(){
            overlay.addEventListener('click', function(){
                if (audio.paused){
                    audio.play();
                    mainText.classList.add('playing');
                }else{
                    audio.pause();
                    audio.currentTime = 0;
                    mainText.classList.remove('playing');
                }
            });
        }
    </script>
  </body>
</html>